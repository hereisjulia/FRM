library(data.table)
library(data.table)
library(quantmod)
library(quantmod)
date.from <- "2007-12-31"
date.to   <- "2022-12-31"
vfiax <- getSymbols("vfiax",src="yahoo",
from=date.from,
to=date.to,
auto.assign=FALSE)[,6]
str(vfiax)
vfiax <- na.omit(vfiax)
# convert to data.table
data.yahoo <- as.data.table(vfiax)
names(data.yahoo)[1] <- 'date'
head(data.yahoo,3)
data.yahoo[, logret := c(NA,diff(log(data.yahoo$VFIAX.Adjusted)))]
data.yahoo <- data.yahoo[-1]
data.yahoo[, ret := exp(logret)-1 ]
data.yahoo
str(vfiax)
vfiax
vfiax <- getSymbols("vfiax",src="yahoo",
from=date.from,
to=date.to,
auto.assign=FALSE)[,6]
vfiax <- na.omit(vfiax)
vfiax
vfiax <- getSymbols("vfiax",src="yahoo",
from=date.from,
to=date.to,
auto.assign=FALSE)
vfiax <- na.omit(vfiax)
vfiax
vfiax <- getSymbols("vfiax",src="yahoo",
from=date.from,
to=date.to,
auto.assign=FALSE)[,6]
vfiax <- na.omit(vfiax)
vfiax
str(vfiax)
# convert to data.table
data.yahoo <- as.data.table(vfiax)
names(data.yahoo)[1] <- 'date'
head(data.yahoo,3)
data.yahoo[, logret := c(NA,diff(log(data.yahoo$VFIAX.Adjusted)))]
data.yahoo <- data.yahoo[-1]
data.yahoo[, ret := exp(logret)-1 ]
str(data.yahoo)
nrow(vfiax)
data.yahoo
head(data.yahoo,3)
head(data.yahoo)
plot(data.yahoo$date, data.yahoo$VFIAX.Adjusted)
plot(data.yahoo$date, data.yahoo$ret)
plot(data.yahoo$date, data.yahoo$logret)
plot(data.yahoo$date, data.yahoo$logret)
logret.xts <- xts(data.yahoo$logret,order.by=data.yahoo$date)
names(logret.xts) = c('logret')
str(logret.xts)
library(ggplot2)
library(ggplot2)
ggplot(logret.xts)
ggplot(logret.xts)+
geom_point()
logret.xts
ggplot(logret.xts)+
geom_point(aes(x = index(logret.xts), y = logret))
ggplot(logret.xts)+
geom_point(aes(x = index(logret.xts), y = logret))+
theme_minimal()
# sample R file to upload for individual assignment
# use setwd() to set the working directory
# do not use choose.file()
# please place the R code for each question in the space provided below.
# R submission files that do not follow the required format will have points deducted.
setwd("E:/MQM_Courses/Term5/Financial_Risk_Management/FRM/data")
load("MQM530_IndividualAssignment1.RData")
# sample R file to upload for individual assignment
# use setwd() to set the working directory
# do not use choose.file()
# please place the R code for each question in the space provided below.
# R submission files that do not follow the required format will have points deducted.
setwd("E:/MQM_Courses/Term5/Financial_Risk_Management/FRM/data")
load("MQM530_IndividualAssignment1.RData")
### question 2 start ###
merge(vfiax_price, vfiax_dividend, on = "Date")
vfiax_price
?merge
class(vfiax_price)
### question 2 start ###
merge(vfiax_price, vfiax_dividend, by = "Date", all.x = TRUE)
### question 2 start ###
data_van <- merge(vfiax_price, vfiax_dividend, by = "Date", all.x = TRUE)
data_van
# sample R file to upload for individual assignment
# use setwd() to set the working directory
# do not use choose.file()
# please place the R code for each question in the space provided below.
# R submission files that do not follow the required format will have points deducted.
library(data.table)
library(quantmod)
library(xts)
setwd("E:/MQM_Courses/Term5/Financial_Risk_Management/FRM/data")
load("MQM530_IndividualAssignment1.RData")
### question 2 start ###
data_van <- merge(vfiax_price, vfiax_dividend, by = "Date", all.x = TRUE)
class(vfiax_price)
data_van
na.fill(data_van$Dividend, 0)
data_van
data_van$Dividend <-  na.fill(data_van$Dividend, 0)
data_van
View(data_van)
data_van[Dividend != 0]
## daily discrete return:
data_van[, lag := lag(Price)]
data_van
## daily discrete return:
data_van[, lag := lag(Price,1)]
data_van
## daily discrete return:
data_van[, lag := lag(Price, k = 1)]
data_van
?xts
## daily discrete return:
xts(data_van[-1], order.by = data_van[1])
## daily discrete return:
xts(data_van, order.by = data_van[1])
str(data_van)
as.xts(data_van)
data_van <- as.xts(data_van)
## daily discrete return:
str(data_van)
data_van[, lag := lag(Price, k = 1)]
setwd("E:/MQM_Courses/Term5/Financial_Risk_Management/FRM/data")
load("MQM530_IndividualAssignment1.RData")
### question 2 start ###
data_van <- merge(vfiax_price, vfiax_dividend, by = "Date", all.x = TRUE)
data_van$Dividend <-  na.fill(data_van$Dividend, 0)
## daily discrete return:
str(data_van)
data_van[, lag := lag(Price, k = 1)]
data_van
### question 2 start ###
data_van <- merge(vfiax_price, vfiax_dividend, by = "Date", all.x = TRUE)
data_van$Dividend <-  na.fill(data_van$Dividend, 0)
data_van[, ret := diff(Price)]
data_van
data_van[, ret := diff(data_van$Price)]
diff(data_van$Price)
data_van
data_van[, ret := c(NA,diff(data_van$Price))]
data_van
data_van[, ret := c(NA,log(data_van$Price))]
data_van[, ret := c(NA,lag(data_van$Price))]
data_van[, ret := lag(data_van$Price)]
data_van
lag(data_van$Price)
lag(data_van$Price, k = 1)
data_van$Price
?lag()
data_van[, ret := shift(Price, n =1)]
data_van
data_van[, ret := shift(Price, n = -1)]
data_van
data_van[, ret := (Price + Dividend ) / shift(Price, n = -1)]
data_van
data_van[, ret := (Price + Dividend ) / shift(Price, n = -1) - 1]
data_van
data_van[, ret := (Price + Dividend ) / shift(Price, n = 1) - 1]
data_van
adta_van[Date == "2023-02-16"]
data_van[Date == "2023-02-16"]
data_van[Date == "2023-02-16", "ret"]
data_van[Date == "2023-02-16"]$ret
answer2 = round(data_van[Date == "2023-02-16"]$ret, 4)  ### replace NA with R code generating the answer
cat("Answer Q2:", answer2,'\n')
str(data_van)
### question 2 start ###
data_van <- merge(vfiax_price, vfiax_dividend, by = "Date", all.x = TRUE)
data_van$Dividend <-  na.fill(data_van$Dividend, 0)
str(data_van)
## daily discrete return: ((Pt + Dt)/Pt-1) -1
data_van[, ret_van := (Price + Dividend ) / shift(Price, n = 1) - 1]
answer2 = round(data_van[Date == "2023-02-16"]$ret_van, 4)  ### replace NA with R code generating the answer
cat("Answer Q2:", answer2,'\n')
### question 3 start ###
data_van[, logret_van := log( 1 + ret_van )]
data_van
answer3 = round(data_van[Date == "2023-02-16"]$logret_van, 4)  ### replace NA with R code generating the answer
cat("Answer Q3:", answer3,'\n')
# sample R file to upload for individual assignment
# use setwd() to set the working directory
# do not use choose.file()
# please place the R code for each question in the space provided below.
# R submission files that do not follow the required format will have points deducted.
library(data.table)
library(quantmod)
### question 4 start ###
vfiax <- getSymbols("vfiax", src="yahoo", from="2022-12-31",
to="2024-01-01", auto.assign=FALSE)[,6]
data_yahoo <- as.data.table(vfiax)
names(data.yahoo) <- c("Date","AdjPrice")
names(data_yahoo) <- c("Date","AdjPrice")
data_yahoo[, logret_yahoo := c(NA,diff(log(AdjPrice))) ]
data_yahoo[, ret_yahoo := exp(logret_yahoo)-1 ]
data_yahoo
data_yahoo[Date == "2023-02-16"]
data_yahoo[Date == "2023-02-16"]$ret_yahoo
answer4 = round(data_yahoo[Date == "2023-02-16"]$ret_yahoo, 4) ### replace NA with R code generating the answer
cat("Answer Q4:", answer4,'\n')
data_van[Date == "2023-02-16"]$logret_van
data_van[Date == "2023-02-16"]$ret_van
cat("Answer Q4:", answer4,'\n')
### question 5 start ###
tmp1 <- data_van[, .(Date,ret_van) ]
tmp2 <- data_yahoo[, .(Date,ret_yahoo) ]
tmp1
tmp2
merge(tmp1, tmp2, by = Date)
merge(tmp1, tmp2, by = "Date")
tmp <- merge(tmp1, tmp2, by = "Date")
tmp[, dif := abs(ret_van - ret_yahoo)]
tmp
max(tmp$dif)
na.omit(tmp)
tmp
tmp <- tmp[, dif := abs(ret_van - ret_yahoo)]
tmp <- na.omit(tmp)
max(tmp$dif)
answer5 = max(tmp$dif)            ### replace NA with R code generating the answer
cat("Answer Q5:", answer5,'\n')
answer5 = round(max(tmp$dif),6)    ### replace NA with R code generating the answer
round(max(tmp$dif),6)
cat("Answer Q5:", answer5,'\n')
answer5 = as.character(round(max(tmp$dif),6) )   ### replace NA with R code generating the answer
as.character(round(max(tmp$dif),6) )
answer5 = max(tmp$dif) ### replace NA with R code generating the answer
cat("Answer Q5:", answer5,'\n')
### question 6 start ###
logret.xts <- as.xts( x=data_yahoo$logret_yahoo, order.by=data_yahoo$Date)
logret_monthly <- apply.monthly(logret.xts,sum)
logret_monthly
ret_monthly <- exp(logret_monthly) - 1
ret_monthly
ret_monthly[.N]
ret_monthly[.N,]
ret_monthly["2023-12-29"]
ret_monthly[["2023-12-29"]]
ret_monthly["2023-12-29"]
answer6 = ret_monthly["2023-12-29"]              ### replace NA with R code generating the answer
cat("Answer Q6:", answer6,'\n')
answer6 = round(ret_monthly["2023-12-29"],4) ### replace NA with R code generating the answer
cat("Answer Q6:", answer6,'\n')
### Verify your answers ###
check_for_answer <- function(question_num) {
# check environment if variable containing the answer is present in R environment
# in try catch block below
tryCatch({
if (exists(paste0("answer",question_num))){
answer <- get(paste0("answer",question_num))
}
else{
answer <- NA
}
})
return(answer)
}
answers = rep(NA, 6)
for (i in c(2,3,4,5,6)){
answers[i] = check_for_answer(i)
}
answers
